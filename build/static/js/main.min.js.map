{"version":3,"sources":["unknown"],"names":["q","s","document","querySelector","qa","querySelectorAll","createElement","tag","properties","children","e","Object","keys","key","child","appendChild","shuffle","array","i","length","j","Math","floor","random","request","url","callback","xhr","XMLHttpRequest","addEventListener","readyState","status","JSON","parse","response","open","send","destinationPath","window","location","href","slice","origin","isApiUrl","startsWith","textContent","getAttribute","err","root","map","entry","healthKnown","monitor","name","details","health","uptime","apiEnabled","api","filter","type","sort","a","b","forEach","target","uri","replace","healthUnknown","toFixed","flag","region","className","remove"],"mappings":"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","sourcesContent":["\"use strict\";\n\n;(() => {\n\tconst q = s => document.querySelector(s)\n\tconst qa = s => document.querySelectorAll(s)\n\n\tfunction createElement(tag, properties = {}, children = []) {\n\t\tconst e = document.createElement(tag)\n\t\tfor (const key of Object.keys(properties)) {\n\t\t\te[key] = properties[key]\n\t\t}\n\t\tfor (const child of children) {\n\t\t\te.appendChild(child)\n\t\t}\n\t\treturn e\n\t}\n\n\tfunction shuffle(array) {\n\t\tfor (let i = 0; i < array.length; i++) {\n\t\t\tlet j = Math.floor(Math.random() * (array.length-i)) + i\n\t\t\t;[array[i], array[j]] = [array[j], array[i]]\n\t\t}\n\t\treturn array\n\t}\n\n\tfunction request(url, callback) {\n\t\tconst xhr = new XMLHttpRequest()\n\t\txhr.addEventListener(\"readystatechange\", () => {\n\t\t\tif (xhr.readyState === 4) {\n\t\t\t\tif (xhr.status === 200) {\n\t\t\t\t\tcallback(null, JSON.parse(xhr.response))\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\txhr.open(\"GET\", url)\n\t\txhr.send()\n\t}\n\n\tconst destinationPath = window.location.href.slice(window.location.origin.length)\n\tconst isApiUrl = destinationPath.startsWith('/api/v1')\n\n\tq(\"#watch-on-youtube\").href = \"https://www.youtube.com\" + destinationPath\n\n\tfor (const e of qa(\"[data-loading-message]\")) {\n\t\te.textContent = e.getAttribute(\"data-loading-message\")\n\t}\n\n\trequest(\"https://api.invidious.io/instances.json?sort_by=type,health\",\n\t/** @param {[string, {monitor: any, api: boolean, flag: string, region: string, stats: any, type: string, uri: string}][]} root */ (err, root) => {\n\t\tshuffle(root)\n\t\troot.map(entry => {\n\t\t\tconst healthKnown = !!entry[1].monitor\n\t\t\treturn {\n\t\t\t\tname: entry[0],\n\t\t\t\tdetails: entry[1],\n\t\t\t\thealth: +(healthKnown ? entry[1].monitor.uptime : 95),\n\t\t\t\tapiEnabled: entry[1].api,\n\t\t\t\thealthKnown\n\t\t\t}\n\t\t}).filter(entry => {\n\t\t\treturn entry.details.type === \"https\" && entry.health > 0 && (!isApiUrl || entry.apiEnabled)\n\t\t}).sort((a, b) => {\n\t\t\treturn b.health - a.health\n\t\t}).forEach(entry => {\n\t\t\tlet target = entry.details.uri.replace(/\\/*$/, \"\") + destinationPath\n\t\t\tconst healthUnknown = entry.healthKnown ? \"\" : \"health-unknown \"\n\t\t\tconst health = entry.healthKnown ? entry.health.toFixed(0) : \"(unknown)\"\n\t\t\tq(\"#instances-tbody\").appendChild(\n\t\t\t\tcreateElement(\"tr\", {}, [\n\t\t\t\t\tcreateElement(\"td\", {textContent: `${entry.details.flag} ${entry.details.region}`}),\n\t\t\t\t\tcreateElement(\"td\", {textContent: entry.name}),\n\t\t\t\t\tcreateElement(\"td\", {className: \"column-center \"+healthUnknown, textContent: health}),\n\t\t\t\t\tcreateElement(\"td\", {className: \"column-center\"}, [\n\t\t\t\t\t\tcreateElement(\"a\", {href: target, textContent: \"Go â†’\"})\n\t\t\t\t\t])\n\t\t\t\t])\n\t\t\t)\n\t\t})\n\n\t\tfor (const e of qa(\".loading\")) {\n\t\t\te.remove()\n\t\t}\n\t})\n})()\n"]}